<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>点标记的使用（添加、更新、删除）</title>
<link rel="stylesheet" type="text/css" href="Default.css" />
<script language="javascript" src="http://webapi.amap.com/maps?v=1.2&key=0034547e91d5b945366d8567c069a2ab"></script>
<script language="javascript">
var mapObj;
//初始化地图对象，加载地图
function mapInit(){
	var latitudeo = "50";
    var longitudeo = "120";
    var latCetner = "";
    var lngCenter = "";
	var zm = 10 ;
	var city = "";
	
	//中点位置
	if (window.android){
		latCetner = window.android.getLatCenter();
		lngCenter = window.android.getLngCenter();
		zm = window.android.getScale();
		
    }
	
    
    mapObj = new AMap.Map("iCenter",{
    center:new AMap.LngLat(lngCenter,latCetner), //地图中心点
    level:zm  //地图显示的比例尺级别
    }); 
    
    //centerAt("30.32_32.1_","120.23_120.111_","杭州_shanghai_");
    
    //显示足迹
    if (window.android){
		
    	
    	var showFootMap = 0;
    	showFootMap = window.android.showFootMap();
    	
    	latitudeo = window.android.getLatitude();
    	longitudeo = window.android.getLongitude();
    	city = window.android.getInfo();
    	var icon = window.android.getIcon();
    	
    	if (showFootMap>0)
   		{
    		centerAtWithIcon(latitudeo, longitudeo, city, icon);
   		}
    	
    }
    
}

function mapInit2(){
	var latitudeo = "30";
    var longitudeo = "120";
	var zm = 1;
	
    
    mapObj = new AMap.Map("iCenter",{
    center:new AMap.LngLat(longitudeo,latitudeo), //地图中心点
    level:zm  //地图显示的比例尺级别
    }); 
    
    //centerAt("30.32_32.1_","120.23_120.111_","杭州_shanghai_");
}

var latitudeArr;
	var longitudeArr ;
	var cityArr ;
	var myArray;
function centerAt(latitude, longitude,city){
	latitudeArr = latitude.split("_");
	longitudeArr = longitude.split("_");
	cityArr = city.split("_");

	for(i=0;i<latitudeArr.length-1;i++){
		addMarker(latitudeArr[i],longitudeArr[i],cityArr[i]);
	}
} 


//子定义图标
function centerAtWithIcon(latitude, longitude, city, ic)
{
	latitudeArr = latitude.split("_");
	longitudeArr = longitude.split("_");
	cityArr = city.split("_");
	
	if (latitudeArr.length == 1)
	{
		mapObj.panTo(new AMap.LngLat(longitudeArr[0],latitudeArr[0])); 
	}

	for(i=0;i<latitudeArr.length;i++){
		//addMarker(latitudeArr[i],longitudeArr[i],cityArr[i]);
		addMarkerWithIcon(latitudeArr[i],longitudeArr[i],cityArr[i], ic);
	}
	
	
	
}

//实例化点标记
function addMarker(lat,lng,info){
    var marker=new AMap.Marker({                  
    icon:"location_small.png" ,
    position:new AMap.LngLat(lng,lat)
    });
    marker.setMap(mapObj);  //在地图上添加点

     AMap.event.addListener(marker,'click',function(){ //鼠标点击marker弹出自定义的信息窗体  
         showInfoWindow(marker,info);    
   });    
} 

function addMarkerWithIcon(lat,lng,info, ic){
    var marker=new AMap.Marker({                  
    icon:ic,
    position:new AMap.LngLat(lng,lat)
    });
    marker.setMap(mapObj);  //在地图上添加点

     AMap.event.addListener(marker,'click',function(){ //鼠标点击marker弹出自定义的信息窗体  
         showInfoWindow(marker,info);    
   });    
} 
  
  function showInfoWindow(marker,contentinfo){
    //实例化信息窗体  
		var infoWindow = new AMap.InfoWindow({    
        content:contentinfo,  //使用默认信息窗体框样式，显示信息内容 
        size:new AMap.Size(70,25),
        offset:new AMap.Pixel(5, -30)//-113, -140 
    });   
		infoWindow.open(mapObj,marker.getPosition()); 
  }
  
  function centerAt2(latitude, longitude,mark){
  	mapObj.panTo(new AMap.LngLat(longitude,latitude)); 
	addMarker(latitude,longitude,"");
  }
  
 
</script>

</head>
<body onLoad="mapInit()">
    <div id="iCenter" style="position:absolute;height:100%"></div>

</body>
</html>
